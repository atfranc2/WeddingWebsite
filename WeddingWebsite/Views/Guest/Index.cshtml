
<h1>Guest Management Portal</h1>
<div>
    @Html.ActionLink("Add Guests", "New", "Guest", null, new { @class = "btn btn-primary" })
</div>
<br />
<div>
    <table id="guestsTable" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">
        <thead>
            <tr>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Edit</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>
    @section scripts {
        <script src="~/lib/datatables/js/jquery.dataTables.min.js"></script>
        <script src="~/lib/datatables/js/dataTables.bootstrap4.min.js"></script>
        <script>

            let guestsDataTable;

            function buildGuestsTable() {
                $("#guestsTable").DataTable({
                    ajax: {
                        url: "/api/guests",
                        dataSrc: ""
                    },
                    columns: [
                        {
                            data: "firstName",
                            render: function (data) {
                                return "<a>" + data + "</a>";
                            }
                        },
                        {
                            data: "lastName",
                            render: function (data) {
                                return "<a>" + data + "</a>";
                            }
                        },
                        {
                            data: "id",
                            render: function (data) {
                                return '<i class="fa fa-pencil-alt"></i>';
                            }
                        }
                    ]
                });
            }

            $(document).ready(function () {
                buildGuestsTable();
            })
        </script>
    }
